# ---- Listener ----
LISTEN_HOST=127.0.0.1
LISTEN_PORT=8088

# ---- Jira (Cloud) ----
JIRA_BASE_URL=https://your-domain.atlassian.net
JIRA_EMAIL=you@moveware.com
JIRA_API_TOKEN=...  # Atlassian API token

# Account IDs (not display names) for assignments
JIRA_AI_ACCOUNT_ID=...      # AI Runner accountId
JIRA_HUMAN_ACCOUNT_ID=...   # Leigh's accountId

# Shared secret used by Jira Automation when calling the webhook
JIRA_WEBHOOK_SECRET=change-me

# Pilot workflow statuses (must match Jira)
JIRA_STATUS_BACKLOG=Backlog
JIRA_STATUS_PLAN_REVIEW=Plan Review
JIRA_STATUS_IN_PROGRESS=In Progress
JIRA_STATUS_IN_TESTING=In Testing
JIRA_STATUS_DONE=Done
JIRA_STATUS_BLOCKED=Blocked

# ---- Repo settings (GitHub) ----
REPO_SSH=git@github.com:leigh-moveware/online-docs.git
REPO_WORKDIR=/srv/ai/repos/online-docs
BASE_BRANCH=main
REPO_OWNER_SLUG=leigh-moveware
REPO_NAME=online-docs

# ---- GitHub Authentication ----
# Option 1: Personal Access Token (PAT) - Simple but less secure for orgs
GH_TOKEN=...

# Option 2: GitHub App (Recommended for production/organizations)
# More secure, better audit trail, fine-grained permissions, auto token rotation
# Leave these blank to use PAT (Option 1 above)
# GITHUB_APP_ID=123456
# GITHUB_APP_INSTALLATION_ID=12345678  # Optional, will auto-detect if not set
# GITHUB_APP_PRIVATE_KEY_PATH=/srv/ai/.ssh/github-app-private-key.pem

# ---- LLM providers ----
# OpenAI API (used for planning + self-healing escalation)
OPENAI_API_KEY=...
OPENAI_MODEL=gpt-5.2-codex  # Uses OpenAI Responses API (/v1/responses)
OPENAI_BASE_URL=https://api.openai.com/v1

# Claude API (implementation)
ANTHROPIC_API_KEY=...
ANTHROPIC_MODEL=claude-sonnet-4-20250514  # Latest Claude Sonnet 4
ANTHROPIC_BASE_URL=https://api.anthropic.com

# Optional hardening
DEBUG=false

# ---- Verification / Self-Healing (Optional) ----
# Max LLM fix attempts before failing (default: 7, increased for 95%+ accuracy)
# MAX_FIX_ATTEMPTS=7

# ---- Queue Management (Optional) ----
# Enable smart queue with priorities and conflict avoidance
USE_SMART_QUEUE=true

# ---- Logging (Optional) ----
# Log level: DEBUG, INFO, WARNING, ERROR, CRITICAL
LOG_LEVEL=INFO
# Log format: human (colored) or json (structured)
LOG_FORMAT=human
# Optional: log to file (in addition to console)
# LOG_FILE=/srv/ai/logs/worker.log

# ---- Multi-Repository Configuration (Optional) ----
# Path to repos.json for multi-repo support
# If not set, uses config/repos.json by default
# REPOS_CONFIG_PATH=/srv/ai/app/config/repos.json

# Base directory for repo workdirs (used by Add Repository page)
# Default: /srv/ai/repos
# REPOS_BASE_DIR=/srv/ai/repos

# ---- Add Repository Page (Optional) ----
# If set, POST /api/repos/add requires X-Admin-Secret header matching this value
# ADMIN_SECRET=your-admin-secret

# ---- Project Knowledge for Planning (Optional) ----
# Path to project-knowledge.md. Injected into the planner so the AI does not ask
# basic questions about infrastructure, cloud, deployment, etc. Default: config/project-knowledge.md
# PROJECT_KNOWLEDGE_PATH=/srv/ai/app/config/project-knowledge.md

# ---- GitHub Auto-Deploy Webhook (Optional) ----
# Secret for GitHub webhook to trigger auto-deployment
# Generate with: openssl rand -hex 32
# GITHUB_DEPLOY_WEBHOOK_SECRET=your-secret-here